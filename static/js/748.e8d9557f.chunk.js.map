{"version":3,"file":"static/js/748.e8d9557f.chunk.js","mappings":"0MACA,EAA2B,2BAA3B,EAAgE,0BAAhE,EAA2I,uBAA3I,EAAoL,kCAApL,EAAwO,kCAAxO,EAAuR,6B,6BCS1QA,EAAa,SAACC,GAEvB,OACI,8BACKA,EAAMC,UAAUC,KAAI,SAAAC,GACjB,OACI,0BAEI,SAAC,KAAD,CAASC,GAAI,aAAeD,EAAOE,GAAnC,SACKF,EAAOG,SAHNC,EAAAA,EAAAA,Y,uCCLxBC,GAAsBC,EAAAA,EAAAA,GAAiB,K,SCChCC,EAAc,SAACV,GAMxB,OACI,gCACKA,EAAMW,WAAWT,KAAI,SAAAU,GAClB,OACI,yBACKA,EAAQC,OADHN,EAAAA,EAAAA,UAKlB,gBAAKO,UAAWC,EAAhB,UACI,SAACC,EAAD,CAAkBC,SAdb,SAACC,GACdlB,EAAMmB,mBAAmBD,EAASE,qBAmB7BJ,GAAmBK,EAAAA,EAAAA,GAA2B,CACvDC,KAAM,qBADsBD,EDrByC,SAAC,GAAoB,IAAnBE,EAAkB,EAAlBA,aAEvE,OACI,kBAAMN,SAAUM,EAAhB,WACI,gBAAKT,UAAWC,EAAhB,UACI,SAACS,EAAA,EAAD,CAAOC,YAAa,uGACbnB,KAAM,aACNoB,UAAWC,EAAAA,EACXC,SAAU,CAACC,EAAAA,EAAerB,QAGrC,gBAAKM,UAAWC,EAAhB,UACI,SAACe,EAAA,EAAD,oI,yEEfVC,EAA6B,SAACC,GAAD,MAA4D,CAC3FC,OAAQD,EAAME,KAAKD,S,UCTVE,EAAsB,SAACH,GAChC,OAAOA,EAAMI,YAAYC,aAGhBC,EAAuB,SAACN,GACjC,OAAOA,EAAMI,YAAYG,cCgCvBC,EAAqD,CACvDC,cAAAA,EAAAA,GAOSC,GAAoBC,EAAAA,EAAAA,KAA6BC,EAAAA,EAAAA,KA3BtC,SAACZ,GACrB,MAAO,CACH/B,UAAWkC,EAAoBH,GAC/BrB,WAAY2B,EAAqBN,MAwB8CQ,IFjCvD,SAAMK,GAQlC,OAAOD,EAAAA,EAAAA,IAAQb,EAARa,EANuB,SAAC5C,GAC3B,IAAKiC,EAAwBjC,EAAxBiC,OAAWa,GAAhB,OAA6B9C,EAA7B,GAEA,OAAKiC,GACE,SAACY,GAAD,UAAeC,KADF,SAAC,KAAD,CAAU1C,GAAI,gBE4BTuC,ECtCT,SAAC3C,GAErB,IAAM+C,GAAWC,EAAAA,EAAAA,MACXf,GAASgB,EAAAA,EAAAA,GAAeC,EAAAA,IAM9B,OAJAC,EAAAA,EAAAA,YAAU,WACDlB,GAAQc,EAAS,YACvB,CAACd,KAGA,+BACI,iBAAKnB,UAAWC,EAAhB,WACI,gBAAKD,UAAWC,EAAhB,UACI,SAAChB,EAAD,CAAYE,UAAWD,EAAMC,eAEjC,gBAAKa,UAAWC,EAAhB,UACI,SAACL,EAAD,CAAaC,WAAYX,EAAMW,WAClBQ,mBAAoBnB,EAAMyC","sources":["webpack://it-samurai-social/./src/components/Messages/Messages.module.css?8e7e","components/Messages/DialogItem.tsx","components/Messages/MessageForm.tsx","components/Messages/MessageItem.tsx","common/hoc/withAuthRedirect.tsx","redux/dialogsPage-selectors.ts","components/Messages/MessagesContainer.tsx","components/Messages/Messages.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"messages\":\"Messages_messages__gqfrG\",\"dialogs\":\"Messages_dialogs__2f7HS\",\"activeLink\":\"Messages_activeLink__UxaGK\",\"text\":\"Messages_text__+1N8z\",\"sendMessageForm\":\"Messages_sendMessageForm__pQdBN\",\"sendMessageArea\":\"Messages_sendMessageArea__QqvTJ\",\"sendButton\":\"Messages_sendButton__ENB1A\"};","import React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport classes from \"./Messages.module.css\";\r\nimport {DialogsArray} from '../../redux/dialogsPage-reducer';\r\nimport {v1} from \"uuid\";\r\n\r\ntype DialogItemPropsType = {\r\n    myDialogs: Array<DialogsArray>\r\n}\r\n\r\nexport const DialogItem = (props: DialogItemPropsType) => {\r\n\r\n    return (\r\n        <>\r\n            {props.myDialogs.map(dialog => {\r\n                return (\r\n                    <div key={v1()}>\r\n                        {/*<NavLink to={'/messages/' + dialog.id} activeClassName={classes.activeLink}>*/}\r\n                        <NavLink to={'/messages/' + dialog.id}>\r\n                            {dialog.name}\r\n                        </NavLink>\r\n                    </div>\r\n                )\r\n            })}\r\n        </>\r\n    );\r\n}","import React from \"react\";\r\nimport styles from \"./Messages.module.css\";\r\nimport {Field, InjectedFormProps} from \"redux-form\";\r\nimport {SuperTextArea} from \"../../common/UI/Textarea/SuperTextArea\";\r\nimport {SuperButton} from \"../../common/UI/Button/SuperButton\";\r\nimport {maxLengthCreator, requiredField} from \"../../common/utils/validators\";\r\n\r\nexport type MessageFormType = {\r\n    newMessage: string\r\n}\r\n\r\nconst maxLengthCreator300 = maxLengthCreator(300);\r\n\r\nexport const MessageForm: React.FC<InjectedFormProps<MessageFormType>> = ({handleSubmit}) => {\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className={styles.sendMessageArea}>\r\n                <Field placeholder={'Введите сообщение...'}\r\n                       name={'newMessage'}\r\n                       component={SuperTextArea}\r\n                       validate={[requiredField, maxLengthCreator300]}\r\n                />\r\n            </div>\r\n            <div className={styles.sendButton}>\r\n                <SuperButton>Отправить сообщение</SuperButton>\r\n            </div>\r\n        </form>\r\n    )\r\n};","import React from \"react\";\r\nimport styles from \"./Messages.module.css\";\r\nimport {v1} from \"uuid\";\r\nimport {MessagesArray} from \"../../redux/dialogsPage-reducer\";\r\nimport {MessageForm, MessageFormType} from \"./MessageForm\";\r\nimport {reduxForm} from \"redux-form\";\r\n\r\ntype MessageItemPropsType = {\r\n    myMessages: Array<MessagesArray>\r\n    sendMessageHandler: (newMessageTextForDialog: string) => void\r\n}\r\n\r\nexport const MessageItem = (props: MessageItemPropsType) => {\r\n\r\n    const onSubmit = (formData: MessageFormType) => {\r\n        props.sendMessageHandler(formData.newMessage);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {props.myMessages.map(message => {\r\n                return (\r\n                    <div key={v1()}>\r\n                        {message.text}\r\n                    </div>\r\n                )\r\n            })}\r\n            <div className={styles.sendMessageForm}>\r\n                <MessageReduxForm onSubmit={onSubmit}/>\r\n            </div>\r\n        </>\r\n    )\r\n};\r\n\r\nexport const MessageReduxForm = reduxForm<MessageFormType>({\r\n    form: 'dialogMessageForm' // уникальное строковое имя для каждой формы\r\n})(MessageForm)","import React, {ComponentType} from \"react\";\r\n// import {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\nimport {RootStateType} from \"../../redux/redux-store\";\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\ntype MapStateToPropsAuthRedirectType = {\r\n    isAuth: boolean\r\n}\r\n\r\nconst mapStateToPropsForRedirect = (state: RootStateType): MapStateToPropsAuthRedirectType => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = <T, >(Component: ComponentType<T>) => {\r\n\r\n    const AuthRedirectComponent = (props: MapStateToPropsAuthRedirectType) => {\r\n        let {isAuth, ...restProps} = props;\r\n        // if (!isAuth) return <Redirect to={'/login'}/>\r\n        if (!isAuth) return <Navigate to={'/login'}/>\r\n        return <Component {...restProps as T} />\r\n    }\r\n    return connect(mapStateToPropsForRedirect)(AuthRedirectComponent);\r\n}","import {RootStateType} from \"./redux-store\";\r\n\r\nexport const dialogsDataSelector = (state: RootStateType) => {\r\n    return state.dialogsPage.dialogsData;\r\n}\r\n\r\nexport const messagesDataSelector = (state: RootStateType) => {\r\n    return state.dialogsPage.messagesData;\r\n}","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {RootStateType} from \"../../redux/redux-store\";\r\nimport {DialogsArray, MessagesArray} from \"../../redux/dialogsPage-reducer\";\r\nimport {Messages} from \"./Messages\";\r\nimport {sendMessageAC} from \"../../redux/dialogsPage-reducer\";\r\nimport {withAuthRedirect} from \"../../common/hoc/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {dialogsDataSelector, messagesDataSelector} from '../../redux/dialogsPage-selectors';\r\n\r\nexport type MessagesContainerType = MapStateToPropsMessagesType & MapDispatchToPropsMessagesType;\r\n\r\ntype MapStateToPropsMessagesType = {\r\n    myDialogs: Array<DialogsArray>\r\n    myMessages: Array<MessagesArray>\r\n}\r\ntype MapDispatchToPropsMessagesType = {\r\n    sendMessageAC: (newMessageTextForDialog: string) => void\r\n}\r\n\r\nconst mapStateToProps = (state: RootStateType) => {\r\n    return {\r\n        myDialogs: dialogsDataSelector(state),\r\n        myMessages: messagesDataSelector(state)\r\n    }\r\n}\r\n\r\n// первоначально было так\r\n/*const mapDispatchToProps = (dispatch: Dispatch<ActionsType>) => {\r\n    return {\r\n        sendMessageHandler: () => {\r\n            dispatch(sendMessageAC());\r\n        },\r\n        onChangeMessageText: (textareaMessage: string) => {\r\n            dispatch(updateNewDialogTextAC(textareaMessage));\r\n        }\r\n    }\r\n}*/\r\n\r\nconst mapDispatchToProps: MapDispatchToPropsMessagesType = {\r\n    sendMessageAC\r\n}\r\n\r\n// Пошаговая запись без compose\r\n// let AuthRedirectComponent = withAuthRedirect(Messages);\r\n// export default connect(mapStateToProps, mapDispatchToProps)(AuthRedirectComponent);\r\n\r\nexport const MessagesContainer = compose<React.ComponentType>(connect(mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect)(Messages);","import React, {useEffect} from 'react';\r\nimport styles from \"./Messages.module.css\";\r\nimport {DialogItem} from \"./DialogItem\";\r\nimport {MessageItem} from \"./MessageItem\";\r\nimport {MessagesContainerType} from \"./MessagesContainer\";\r\nimport {useNavigate} from 'react-router-dom';\r\nimport {useAppSelector} from '../../common/hooks/useAppSelector';\r\nimport {selectedIsAuth} from '../../redux/auth-selectors';\r\n\r\nexport const Messages = (props: MessagesContainerType) => {\r\n\r\n    const navigate = useNavigate()\r\n    const isAuth = useAppSelector(selectedIsAuth)\r\n\r\n    useEffect(() => {\r\n        if (!isAuth) navigate('/login');\r\n    }, [isAuth])\r\n\r\n    return (\r\n        <>\r\n            <div className={styles.messages}>\r\n                <div className={styles.dialogs}>\r\n                    <DialogItem myDialogs={props.myDialogs}/>\r\n                </div>\r\n                <div className={styles.text}>\r\n                    <MessageItem myMessages={props.myMessages}\r\n                                 sendMessageHandler={props.sendMessageAC}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}"],"names":["DialogItem","props","myDialogs","map","dialog","to","id","name","v1","maxLengthCreator300","maxLengthCreator","MessageItem","myMessages","message","text","className","styles","MessageReduxForm","onSubmit","formData","sendMessageHandler","newMessage","reduxForm","form","handleSubmit","Field","placeholder","component","SuperTextArea","validate","requiredField","SuperButton","mapStateToPropsForRedirect","state","isAuth","auth","dialogsDataSelector","dialogsPage","dialogsData","messagesDataSelector","messagesData","mapDispatchToProps","sendMessageAC","MessagesContainer","compose","connect","Component","restProps","navigate","useNavigate","useAppSelector","selectedIsAuth","useEffect"],"sourceRoot":""}